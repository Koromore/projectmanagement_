webpackJsonp([2],{"2rGD":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s={name:"statistics",data:function(){return{statisticsData:{},businessNameData:[],businessListData:[],statusNameData:[],statusListData:[],clientNameData:[],clientStatusData:[]}},methods:{widthheight:function(){window.innerWidth,window.innerHeight},getStatisticsData:function(){this.$axios.post("/pmbs/api/statistic/listAjax",{}).then(this.getStatisticsDataSuss)},getStatisticsDataSuss:function(t){if(200==t.status){this.statisticsData=t.data.data;for(var a=t.data.data,e=a.listBusiness,s=[],i=[],n=0;n<e.length;n++){var o=e[n];s.push(o.businessName);o.listProject;var r={value:o.listProject.length,name:o.businessName,clientList:[]};i.push(r)}this.businessNameData=s,this.businessListData=i;for(var l=a.listProjectStatus,c=[],h=[],u=0;u<l.length;u++){var d=l[u],p={};p.value=d.proNum,p.name=d.status,c.push(d.status),h.push(p)}this.statusNameData=c,this.statusListData=h;for(var g=a.listClient,m=[],b=[],f=0;f<g.length;f++){var v=g[f];m.push(v.clientName)}this.clientNameData=m;for(var D={name:"延期",type:"bar",stack:"广告",data:[],nodeClick:"link"},y={name:"审核中",type:"bar",stack:"广告",data:[],nodeClick:"link"},_={name:"执行中",type:"bar",stack:"广告",data:[],nodeClick:"link"},x=0;x<g.length;x++){for(var L=g[x],w=0,j=0;j<L.projectList.length;j++){4==L.projectList[j].status&&w++}D.data.push(w)}for(var B=0;B<g.length;B++){for(var C=g[B],S=0,N=0;N<C.projectList.length;N++){2==C.projectList[N].status&&S++}y.data.push(S)}for(var F=0;F<g.length;F++){for(var k=g[F],A=0,E=0;E<k.projectList.length;E++){1==k.projectList[E].status&&A++}_.data.push(A)}b.push(D),b.push(y),b.push(_),this.clientStatusData=b,this.business_gantt(s,i),this.project_state_gantt(),this.client_state_gantt()}},business_gantt:function(t,a){var e=this.$echarts.init(document.getElementById("business")),s=this.businessNameData,i=this.businessListData;e.setOption({title:{text:"业务占比",padding:16},color:["#85AFE4","#778CD5","#737ACE","#6F69C6","#B8B3F3","#DDDBF9","#90CFF2","#8BBFE8"],tooltip:{trigger:"item",formatter:function(t,a,e){for(var s="",i=0;i<t.data.clientList.length;i++){s+=t.data.clientList[i]+"<br/>"}return"\n            "+t.name+"\n            ("+t.percent+"%)<br/>\n            "+s+"\n            "}},legend:{type:"scroll",icon:"circle",orient:"horizontal",bottom:10,data:s},series:[{name:"业务类型",type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,label:{normal:{show:!1,position:"center"},emphasis:{show:!0,textStyle:{fontSize:"30",fontWeight:"bold"}}},labelLine:{normal:{show:!1}},data:i}]})},project_state_gantt:function(){var t=this.$echarts.init(document.getElementById("project_state")),a=this.statusNameData,e=this.statusListData;t.setOption({title:{text:"项目状态",padding:16},color:["#23D7BB","#f5b96a","#C9C9C9","#FF0000"],tooltip:{trigger:"item",formatter:"{b}({d}%)"},legend:{icon:"circle",orient:"horizontal",bottom:10,align:"auto",data:a},series:[{name:"项目状态",type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,label:{normal:{show:!1,position:"center"},emphasis:{show:!0,textStyle:{fontSize:"30",fontWeight:"bold"}}},labelLine:{normal:{show:!1}},data:e}]})},client_state_gantt:function(){var t=this,a=this.$echarts.init(document.getElementById("client_state")),e=this.clientNameData,s=this.clientStatusData;s[0].barWidth=81;var i=0;e.length<=5?i=100:e.length>5&&(i=5/e.length*100),a.setOption({title:{text:"客户状态",subtextStyle:{align:"center",rich:{a:{}}},padding:16},color:["#FF0000","#F5B96A","#23D7BB"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["延期","审核中","执行中"],top:16},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:[{type:"category",clientNameData:e,data:e,triggerEvent:!0}],yAxis:[{type:"value"}],dataZoom:[{show:!0,realtime:!0,start:0,end:i},{type:"inside",realtime:!0,start:0,end:i}],series:s}),a.on("click",function(a){var e=a.name;t.$router.push({path:"/home/components/project",query:{name:e}})})}},mounted:function(){this.widthheight(),this.getStatisticsData()}},i={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"statistics"},[a("el-row",[a("el-col",{staticClass:"gantt_box",attrs:{span:10}},[a("div",{style:{width:"100%",height:"300px"},attrs:{id:"business"}})]),this._v(" "),a("el-col",{staticClass:"gantt_box",attrs:{span:10,offset:1}},[a("div",{style:{width:"100%",height:"300px"},attrs:{id:"project_state"}})]),this._v(" "),a("el-col",{staticClass:"gantt_box",attrs:{span:21}},[a("div",{style:{width:"100%",height:"450px"},attrs:{id:"client_state"}})])],1)],1)},staticRenderFns:[]};var n=e("VU/8")(s,i,!1,function(t){e("ZpAB")},"data-v-5d2e962e",null);a.default=n.exports},ZpAB:function(t,a){}});