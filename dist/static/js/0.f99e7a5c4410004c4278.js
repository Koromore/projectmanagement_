webpackJsonp([0],{DM7k:function(t,s){},ydW9:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a("lHA8"),i=a.n(e),l=a("c/Tr"),r=a.n(l),n=a("bOdI"),o=a.n(n),c={name:"task",data:function(){var t;return t={userId:this.$store.state.user.userId,deptId:this.$store.state.user.deptId,loading:!1,drawerLoading:!1,task_type:[],task_type_value:"",clientIdList:[],clientId:"",serviceId:"",isUsual:"",status:"",drawer1:!1,drawer2:!1,drawer3:!1,drawer2_task:"",drawer3_task:"",changeDoUserNameShow:"true",nextuserList:[],nextuserValue:"",loginState:!0,project_style:"",filtratePro:[],filtrateDep:[],tasklist:[],initiateTaskListTota:0,tasklist_:[],participateTaskListTota:0,tableData2:[],result:"",resultBan:!1,cause:"",tabs_activity:1,tab1_act:"",tab2_act:"",suggest_list:[],statusList:[{value:1,label:"执行中"},{value:2,label:"完成"}],statusListValue:"",taskData:{},proExpertTime:"",pickerOptions:{},taskFeedbackId:"",projFeedbackId:"",feedbackContent:"",feedbackFileList:[],dialogImageUrl:"",dialogVisible:!1,disabled:!1,uploadUrl:"",listProFile:[]},o()(t,"suggest_list",[]),o()(t,"fileList0",[]),o()(t,"updateBan",!1),o()(t,"dialogImageUrlResult",""),o()(t,"dialogVisibleResult",!1),o()(t,"disabledResult",!1),o()(t,"uploadUrl",""),o()(t,"listProFileResult",[]),o()(t,"fileList1",[]),o()(t,"oldFileId",""),o()(t,"changeNameShow",!1),o()(t,"userValue",""),t},watch:{clientId:function(t,s){this.findTaskList()},serviceId:function(t,s){this.findTaskList()},isUsual:function(t,s){this.findTaskList()},status:function(t,s){this.findTaskList()},drawer1:function(t,s){0==this.drawer5&&(this.changeNameShow=!1)}},methods:{pickerOptionsTime:function(){var t=this.proExpertTime;this.pickerOptions={disabledDate:function(s){return s.getTime()<Date.now()-864e5||s.getTime()>new Date(t).getTime()}}},widthheight:function(){window.innerWidth,window.innerHeight},getAllClientAndBusiness:function(){this.$axios.post("/pmbs/client/getAllClientAndBusiness").then(this.getAllClientAndBusinessSuss)},getAllClientAndBusinessSuss:function(t){if(200==t.status){for(var s=t.data.data,a=[],e=0;e<s.length;e++){var i=s[e],l={value:i.clientId,label:i.clientName};a.push(l)}this.clientIdList=a}},table_tab:function(t){this.tabs_activity=t},tab1_change:function(t,s){this.tab1_act==t?(this.tab1_act="",this.serviceId=""):1==t?(this.tab1_act=1,this.serviceId=s):2==t?(this.tab1_act=2,this.serviceId=s):3==t&&(this.tab1_act=3,this.serviceId=s)},tab2_change:function(t,s){this.tab2_act==t?(this.tab2_act="",this.isUsual=""):1==t?(this.tab2_act=1,this.isUsual=s):2==t&&(this.tab2_act=2,this.isUsual=s)},tab3_change:function(t){var s=this.status;this.status=s==t?"":t},feedback:function(t){this.drawer2=!0,this.drawer2_task=t.proName+"-"+t.taskName,this.taskFeedbackId=t.taskId,this.projFeedbackId=t.proId},sponsor_achieve:function(t,s){var a=this;this.$confirm("是否确认此操作？","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"确认",cancelButtonText:"取消"}).then(function(){var e={proId:t,taskId:s,status:3,proFileList:[],taskfileList:[]};a.taskSave(e)}).catch(function(t){a.$message({type:"info",message:"已取消"})})},join_redact:function(t,s){var a=this;this.$confirm("是否忽略此任务","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"确认",cancelButtonText:"取消"}).then(function(){var e={proId:t,taskId:s,isIgnore:1,taskfileList:[],proFileList:[]};e.isIgnore=!0,a.taskSave(e)}).catch(function(t){a.$message({type:"info",message:"放弃"})})},join_achieve:function(t,s,a){4==a&&(this.drawer3=!0,this.drawer3_task=s)},filterName:function(t,s){return s.name===t},filterDepartment:function(t,s){return s.department===t},task_detail:function(t,s){var a=this.userId;this.drawer1=!0,this.getDepTypeList();var e="?userId="+a+"&id="+t.taskId;this.getTaskDetail(e)},getDepTypeList:function(){this.$axios.post("/pmbs/api/depType/listAjax",{}).then(this.getDepTypeListSuss)},getDepTypeListSuss:function(t){if(200==t.status){for(var s=t.data.items,a=[],e={},i=0;i<s.length;i++){var l=s[i];e={value:l.typeId,label:l.typeName},a.push(e)}this.task_type=a}},getTaskDetail:function(t){this.drawerLoading=!0,this.$axios.post("/pmbs/api/task/show"+t).then(this.getTaskDetailSuss)},getTaskDetailSuss:function(t){if(this.drawerLoading=!1,200==t.status){var s=t.data.data;this.taskData=s,this.listProFile=s.proFileList,this.listProFileResult=s.taskfileList,this.statusListValue=s.status;for(var a=[],e=0;e<s.proFileList.length;e++){var i=s.proFileList[e],l={fileId:i.fileId,name:i.fileName};a.push(l)}this.fileList0=a;for(var r=[],n=0;n<s.taskfileList.length;n++){var o=s.taskfileList[n],c={fileId:o.fileId,name:o.fileName};r.push(c)}this.fileList1=r}},changeDoUserName:function(t,s){this.changeDoUserNameShow=t,this.getNextuserList(s)},getNextuserList:function(t){var s=t,a=[];if(null!=s)for(var e=0;e<s.length;e++){var i=s[e],l={value:i.userId,label:i.realName};a.push(l)}this.nextuserList=a},changeDoUserNameAffirm:function(t){var s=this.nextuserValue;""==s?this.changeDoUserNameShow="true":(t.doUserId=s,t.proFileList=[],this.$axios.post("/pmbs/api/task/save",t).then(this.changeDoUserNameAffirmSuss))},changeDoUserNameAffirmSuss:function(t){200==t.status&&(this.messageWin("执行人修改成功"),this.getTasklist(),this.changeDoUserNameShow="true")},findTaskList:function(){var t={type:0,clientId:this.clientId,serviceId:this.serviceId,isUsual:this.isUsual,task:{initUserId:this.userId,status:this.status},pageNum:1},s={type:1,clientId:this.clientId,serviceId:this.serviceId,isUsual:this.isUsual,task:{initUserId:this.userId,status:this.status},pageNum:1};this.getTasklistAjax(t),this.getTasklistAjax_(s)},unique:function(t){return r()(new i.a(t))},getTasklist:function(){var t={type:0,task:{initUserId:this.userId},pageNum:1},s={type:1,task:{initUserId:this.userId},pageNum:1};this.getTasklistAjax(t),this.getTasklistAjax_(s)},getTasklistAjax:function(t){this.loading=!0,this.$axios.post("/pmbs/api/task/listAjax",t).then(this.getTasklistAjaxSuss)},getTasklistAjaxSuss:function(t){if(this.loading=!1,200==t.status){var s=t.data.data.items;this.tasklist=s,this.initiateTaskListTota=t.data.data.totalRows}},getTasklistAjax_:function(t){this.loading=!0,this.$axios.post("/pmbs/api/task/listAjax",t).then(this.getTasklistAjax_Suss)},getTasklistAjax_Suss:function(t){if(this.loading=!1,200==t.status){var s=t.data.data.items;this.tasklist_=s,this.participateTaskListTota=t.data.data.totalRows}},upload:function(){this.uploadUrl="\n      /pmbs/file/upload?upType=1&demandType=0\n      "},handleSuccess:function(t,s,a){if(0==t.errcode){var e=t.data,i=this.listProFile,l={proId:this.taskData.proId,taskId:this.taskData.taskId,fileId:"",fileName:e.fileName,isPro:1,localPath:e.path,suffix:e.fileType};i.push(l),this.listProFile=i,console.log(this.listProFile)}},handleRemove:function(t){for(var s=t,a=this.listProFile,e=0;e<a.length;e++){a[e].fileId==s.fileId&&(a[e].deleteFlag=!0)}this.listProFile=a,console.log(this.listProFile)},handleSuccessResult:function(t,s,a){if(0==t.errcode){var e=t.data,i=this.listProFileResult,l={proId:this.taskData.proId,taskId:this.taskData.taskId,fileId:"",updateUserId:this.userId,fileName:e.fileName,localPath:e.path,suffix:e.fileType,oldFileId:this.oldFileId};i.push(l),this.listProFileResult=i}},handleRemoveResult:function(t){var s=this.listProFileResult;s.fileId?this.oldFileId=s.fileId:this.listProFileResult=[]},changeTaskDeil:function(){this.drawer1=!1,this.drawer5=!1;var t=this.taskData,s=this.listProFile,a=this.listProFileResult,e=this.statusListValue;t.proFileList=s,t.taskfileList=a,t.status=e,this.taskSave(t)},taskSave:function(t){this.$axios.post("/pmbs/api/task/save",t).then(this.taskSaveSuss)},taskSaveSuss:function(t){200==t.status&&(this.messageWin(t.data.msg),this.result="",this.listProFile=[],this.listProFileResult=[],this.getTasklist())},taskDelete:function(t){var s="?id="+t;this.$axios.post("/pmbs/api/task/delete"+s).then(this.taskDeleteSuss)},taskDeleteSuss:function(t){if(200==t.status)t.data},handleRemoveFeedback:function(t){for(var s=this.feedbackFileList,a=t.response.data,e=0;e<s.length;e++){s[e].localPath==a.path&&s.splice(e,1)}this.feedbackFileList=s},handleSuccessFeedback:function(t){var s=t.data,a=this.feedbackFileList,e=new Date,i={createTime:e,deleteFlag:!1,feedbackId:"",fileId:"",fileName:s.fileName,localPath:s.path,suffix:s.fileType,taskId:"",updateTime:e};a.push(i)},taskFeedback:function(){for(var t=new Date,s=this.taskFeedbackId,a=this.feedbackFileList,e=0;e<a.length;e++){a[e];a[e].taskId=s}var i={feedback:this.feedbackContent,feedbackFileList:a,initUserId:this.userId,proId:this.projFeedbackId,taskId:s,updateTime:t};console.log(i),""==i.feedback?this.messageError("信息不能为空"):this.$axios.post("/pmbs/api/project/taskfeedback",i).then(this.taskFeedbackSuss)},taskFeedbackSuss:function(t){200==t.status&&(this.messageWin("反馈成功"),this.drawer2=!1,this.feedbackContent="",this.taskFeedbackId="",this.getTasklist())},cancel:function(){this.drawer1=!1},initiateTaskList:function(t){var s={type:0,clientId:this.clientId,serviceId:this.serviceId,isUsual:this.isUsual,task:{initUserId:this.userId,status:this.status},pageNum:t};this.getTasklistAjax(s)},participateTaskList:function(t){var s={type:1,clientId:this.clientId,serviceId:this.serviceId,isUsual:this.isUsual,task:{initUserId:this.userId,status:this.status},pageNum:t};this.getTasklistAjax_(s)},changeName:function(){this.changeNameShow=!0},download:function(t){var s=t.localPath,a=document.createElement("a");a.download="",a.setAttribute("href","http://218.106.254.122:8084/pmbs/"+s),a.click()},empty:function(){this.drawer3=!1,this.drawer2=!1,this.feedbackContent="",this.result=""},messageWin:function(t){this.$message({message:t,type:"success"})},messageWarning:function(t){this.$message({message:t,type:"warning"})},messageError:function(t){this.$message.error(t)},test:function(){console.log("打印测试")}},mounted:function(){this.widthheight(),this.getAllClientAndBusiness(),this.getTasklist(),this.upload()}},u={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"task",style:t.project_style},[a("el-row",[a("el-col",{staticClass:"top",attrs:{span:24}},[a("el-col",{attrs:{span:5}},[a("el-col",{staticClass:"title",attrs:{span:4}},[t._v("客户")]),t._v(" "),a("el-col",{attrs:{span:20}},[a("el-select",{attrs:{clearable:"",placeholder:"全部",size:"small"},model:{value:t.clientId,callback:function(s){t.clientId=s},expression:"clientId"}},t._l(t.clientIdList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)],1),t._v(" "),a("el-col",{staticClass:"tab tab1",attrs:{span:6}},[a("el-button-group",[a("el-button",{class:["1"==t.tab1_act?"act":""],attrs:{type:"primary",plain:"",size:"small"},on:{click:function(s){return t.tab1_change(1,22)}}},[t._v("    官网    ")]),t._v(" "),a("el-button",{class:["2"==t.tab1_act?"act":""],attrs:{type:"primary",plain:"",size:"small"},on:{click:function(s){return t.tab1_change(2,18)}}},[t._v("    口碑    ")]),t._v(" "),a("el-button",{class:["3"==t.tab1_act?"act":""],staticStyle:{"border-left":"0"},attrs:{type:"primary",plain:"",size:"small"},on:{click:function(s){return t.tab1_change(3,17)}}},[t._v("数字营销")])],1)],1),t._v(" "),a("el-col",{staticClass:"tab tab2",attrs:{span:4}},[a("el-button-group",[a("el-button",{class:["1"==t.tab2_act?"act":""],attrs:{type:"primary",plain:"",size:"small"},on:{click:function(s){return t.tab2_change(1,1)}}},[t._v("    专项    ")]),t._v(" "),a("el-button",{class:["2"==t.tab2_act?"act":""],attrs:{type:"primary",plain:"",size:"small"},on:{click:function(s){return t.tab2_change(2,0)}}},[t._v("    日常    ")])],1)],1),t._v(" "),a("el-col",{staticClass:"tab tab3",attrs:{span:8}},[a("el-button-group",[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"新任务",placement:"bottom"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(s){return t.tab3_change(1)}}},[t._v("  1  ")])],1),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"延期",placement:"bottom"}},[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(s){return t.tab3_change(4)}}},[t._v("    2    ")])],1),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"审核中",placement:"bottom"}},[a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(s){return t.tab3_change(2)}}},[t._v("  3  ")])],1),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"执行中",placement:"bottom"}},[a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(s){return t.tab3_change(1)}}},[t._v("  4  ")])],1)],1)],1)],1),t._v(" "),152!=t.userId?a("el-col",{staticClass:"tabs",attrs:{span:24}},[a("div",{class:[1==t.tabs_activity?"act":""],on:{click:function(s){return t.table_tab(1)}}},[t._v("我发起")]),t._v(" "),a("div",{class:[2==t.tabs_activity?"act":""],on:{click:function(s){return t.table_tab(2)}}},[t._v("我参与")])]):t._e(),t._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:1==t.tabs_activity,expression:"tabs_activity==1"}],staticClass:"table table1",attrs:{span:24}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"filterTable",staticStyle:{width:"100%"},attrs:{data:t.tasklist,"header-cell-style":{background:"rgb(236, 235, 235)",color:"#000"},"row-style":{height:"57px",text_aling:"left"}}},[a("el-table-column",{attrs:{prop:"proName",label:"所属项目","column-key":"name",filters:t.filtratePro,"filter-method":t.filterName}}),t._v(" "),a("el-table-column",{attrs:{prop:"deptName",label:"部门",filters:t.filtrateDep,"filter-method":t.filterDepartment}}),t._v(" "),a("el-table-column",{attrs:{prop:"taskName",label:"任务"},scopedSlots:t._u([{key:"default",fn:function(s){return a("el-link",{attrs:{type:"primary"},on:{click:function(a){return t.task_detail(s.row,0)}}},[t._v(t._s(s.row.taskName))])}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"执行状态"},scopedSlots:t._u([{key:"default",fn:function(s){return[1==s.row.isIgnore?a("span",{staticClass:"state_color3"},[t._v("忽略")]):1==s.row.status?a("span",{staticClass:"state_color1"},[t._v("执行中")]):2==s.row.status?a("span",{staticClass:"state_color2"},[t._v("审核中")]):3==s.row.status?a("span",{staticClass:"state_color3"},[t._v("完成")]):4==s.row.status?a("span",{staticClass:"state_color4"},[t._v("延期")]):5==s.row.status?a("span",{staticClass:"state_color3"},[t._v("延期完成")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"faTaskName",label:"父任务"}}),t._v(" "),a("el-table-column",{attrs:{prop:"expertTime",label:"预计时间",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"tag",label:"操作",width:"210","filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(s){return[1!=s.row.isIgnore&&1==s.row.status||2==s.row.status||4==s.row.status?a("el-button",{attrs:{size:"small",type:"info"},on:{click:function(a){return t.feedback(s.row)}}},[t._v("反馈")]):t._e(),t._v(" "),1!=s.row.isIgnore&&2==s.row.status?a("el-button",{attrs:{slot:"reference",size:"small",type:"primary"},on:{click:function(a){return t.sponsor_achieve(s.row.proId,s.row.taskId)}},slot:"reference"},[t._v("完成")]):t._e()]}}])})],1),t._v(" "),a("el-col",{staticClass:"page",attrs:{span:24}},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:t.initiateTaskListTota},on:{"current-change":t.initiateTaskList}})],1)],1),t._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:2==t.tabs_activity,expression:"tabs_activity==2"}],staticClass:"table table2",attrs:{span:24}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"filterTable",staticStyle:{width:"100%"},attrs:{data:t.tasklist_,"header-cell-style":{background:"rgb(236, 235, 235)",color:"#000"},"row-style":{height:"57px"},align:"left"}},[a("el-table-column",{attrs:{prop:"proName",label:"所属项目"}}),t._v(" "),a("el-table-column",{attrs:{prop:"taskName",label:"任务"},scopedSlots:t._u([{key:"default",fn:function(s){return a("el-link",{attrs:{type:"primary"},on:{click:function(a){return t.task_detail(s.row,1)}}},[t._v(t._s(s.row.taskName))])}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(s){return[1==s.row.isIgnore?a("span",{staticClass:"state_color3"},[t._v("忽略")]):1==s.row.status?a("span",{staticClass:"state_color1"},[t._v("执行中")]):2==s.row.status?a("span",{staticClass:"state_color2"},[t._v("审核中")]):3==s.row.status?a("span",{staticClass:"state_color3"},[t._v("完成")]):4==s.row.status?a("span",{staticClass:"state_color4"},[t._v("延期")]):5==s.row.status?a("span",{staticClass:"state_color3"},[t._v("延期完成")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"doUserName",label:"执行人",width:"180"},scopedSlots:t._u([{key:"default",fn:function(s){return[a("div",{directives:[{name:"show",rawName:"v-show",value:t.changeDoUserNameShow!=s.$index,expression:"changeDoUserNameShow != scope.$index"}]},[t._v("\n              "+t._s(s.row.doUserName)+"\n              "),a("el-link",{directives:[{name:"show",rawName:"v-show",value:1!=s.row.isIgnore&&s.row.listOaUser.length>1&&2!=s.row.status&&3!=s.row.status&&5!=s.row.status,expression:"scope.row.isIgnore != true && scope.row.listOaUser.length > 1 && scope.row.status != 2 && scope.row.status != 3 && scope.row.status != 5"}],attrs:{type:"primary"},on:{click:function(a){return t.changeDoUserName(s.$index,s.row.listOaUser)}}},[t._v("更换")])],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.changeDoUserNameShow==s.$index,expression:"changeDoUserNameShow == scope.$index"}]},[a("el-select",{staticStyle:{width:"99px"},attrs:{filterable:"",placeholder:"请选择",size:"mini",clearable:""},model:{value:t.nextuserValue,callback:function(s){t.nextuserValue=s},expression:"nextuserValue"}},t._l(t.nextuserList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),a("el-button",{attrs:{slot:"append",type:"primary",size:"mini"},on:{click:function(a){return t.changeDoUserNameAffirm(s.row)}},slot:"append"},[t._v("确认")])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"expertTime",label:"预计时间",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"overTime",label:"完成时间",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"initUserName",label:"下达人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"taskfileList",label:"成果"},scopedSlots:t._u([{key:"default",fn:function(s){return 3==s.row.status&&0!=s.row.taskfileList.length?a("div",{staticClass:"taskfile",on:{click:function(a){return t.download(s.row.taskfileList[0])}}},["doc"==s.row.taskfileList[0].suffix||"docx"==s.row.taskfileList[0].suffix?a("img",{attrs:{src:"static/images/document/word.png",width:"24",alt:"",srcset:""}}):"xls"==s.row.taskfileList[0].suffix||"xlsx"==s.row.taskfileList[0].suffix?a("img",{attrs:{src:"static/images/document/excle.png",width:"24",alt:"",srcset:""}}):"ppt"==s.row.taskfileList[0].suffix||"pptx"==s.row.taskfileList[0].suffix?a("img",{attrs:{src:"static/images/document/ppt.png",width:"24",alt:"",srcset:""}}):a("img",{attrs:{src:"static/images/document/other.png",width:"24",alt:"",srcset:""}}),t._v(" "),a("el-link",{staticClass:"filenametext",attrs:{type:"primary"}},[t._v(t._s(s.row.taskfileList[0].fileName))])],1):t._e()}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{prop:"operation",label:"操作",width:"210","filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(s){return[1!=s.row.isIgnore&&2!=s.row.status&&3!=s.row.status&&5!=s.row.status?a("el-button",{attrs:{slot:"reference",size:"small",type:"info"},on:{click:function(a){return t.join_redact(s.row.proId,s.row.taskId)}},slot:"reference"},[t._v("忽略")]):t._e(),t._v(" "),1!=s.row.isIgnore&&2!=s.row.status&&3!=s.row.status&&5!=s.row.status?a("el-button",{attrs:{slot:"reference",size:"small",type:"primary"},on:{click:function(a){return t.task_detail(s.row,1)}},slot:"reference"},[t._v("完成")]):t._e()]}}])})],1),t._v(" "),a("el-col",{staticClass:"page",attrs:{span:24}},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next",total:t.participateTaskListTota},on:{"current-change":t.participateTaskList}})],1)],1),t._v(" "),a("el-drawer",{attrs:{title:"任务",visible:t.drawer1,"with-header":!1},on:{"update:visible":function(s){t.drawer1=s}}},[a("el-scrollbar",{staticStyle:{height:"100%"}},[a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:t.drawerLoading,expression:"drawerLoading"}],staticClass:"task_details"},[a("el-col",{staticClass:"title",attrs:{span:24}},[t._v(t._s(t.taskData.proName)+"-"+t._s(t.taskData.taskName))]),t._v(" "),a("el-col",{staticClass:"title",attrs:{span:6}},[t._v("执行部门：")]),t._v(" "),a("el-col",{attrs:{span:18}},[t._v(t._s(t.taskData.deptName))]),t._v(" "),a("el-col",{staticClass:"title",attrs:{span:6}},[t._v("任务类型：")]),t._v(" "),a("el-col",{attrs:{span:18}},[t.taskData.doUserId==t.userId&&1==t.taskData.status||4==t.taskData.status?[a("el-select",{attrs:{placeholder:"请选择任务类型",size:"mini"},model:{value:t.taskData.typeId,callback:function(s){t.$set(t.taskData,"typeId",s)},expression:"taskData.typeId"}},t._l(t.task_type,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)]:[t._v(t._s(t.taskData.typeName))]],2),t._v(" "),a("el-col",{staticClass:"title",attrs:{span:6}},[t._v("执行人：")]),t._v(" "),a("el-col",{attrs:{span:18}},[t.changeNameShow?t._e():a("span",[t._v(t._s(t.taskData.doUserName))]),t._v(" "),t.changeNameShow?a("el-select",{staticStyle:{width:"99px"},attrs:{filterable:"",placeholder:"请选择",size:"mini",clearable:""},model:{value:t.taskData.doUserId,callback:function(s){t.$set(t.taskData,"doUserId",s)},expression:"taskData.doUserId"}},t._l(t.taskData.listOaUser,function(t){return a("el-option",{key:t.userId,attrs:{label:t.realName,value:t.userId}})}),1):t._e(),t._v(" "),a("el-link",{directives:[{name:"show",rawName:"v-show",value:t.taskData.deptId==t.deptId&&1!=t.taskData.isIgnore&&t.taskData.listOaUser.length>1&&2!=t.taskData.status&&3!=t.taskData.status&&5!=t.taskData.status,expression:"taskData.deptId == deptId && taskData.isIgnore != true && taskData.listOaUser.length > 1 && taskData.status != 2 && taskData.status != 3 && taskData.status != 5"}],attrs:{type:"primary"},on:{click:function(s){return t.changeName()}}},[t._v("更换")])],1),t._v(" "),a("el-col",{staticClass:"title",attrs:{span:6}},[t._v("状态：")]),t._v(" "),a("el-col",{attrs:{span:18}},[1==t.taskData.status&&t.taskData.doUserId==t.userId?a("el-select",{class:{state_color1:1==t.statusListValue,state_color2:2==t.statusListValue},attrs:{size:"mini",placeholder:"请选择"},model:{value:t.statusListValue,callback:function(s){t.statusListValue=s},expression:"statusListValue"}},t._l(t.statusList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1):1==t.taskData.status&&t.taskData.doUserId!=t.userId?a("span",{staticClass:"state_color1"},[t._v("执行中")]):2==t.taskData.status?a("span",{staticClass:"state_color2"},[t._v("审核中")]):3==t.taskData.status?a("span",{staticClass:"state_color3"},[t._v("已完成")]):4==t.taskData.status?a("span",{staticClass:"state_color4"},[t._v("延期")]):5==t.taskData.status?a("span",{staticClass:"state_color3"},[t._v("延期完成")]):t._e()],1),t._v(" "),a("el-col",{staticClass:"title",attrs:{span:6}},[t._v("预计时间：")]),t._v(" "),a("el-col",{attrs:{span:18}},[t.taskData.doUserId==t.userId&&1==t.taskData.status||4==t.taskData.status?[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","picker-options":t.pickerOptions,size:"mini"},model:{value:t.taskData.expertTime,callback:function(s){t.$set(t.taskData,"expertTime",s)},expression:"taskData.expertTime"}})]:[t._v(t._s(t.taskData.expertTime))]],2),t._v(" "),a("el-col",{staticClass:"title",attrs:{span:6}},[t._v("完成时间：")]),t._v(" "),a("el-col",{attrs:{span:18}},[t._v(t._s(t.taskData.overTime))]),t._v(" "),a("el-col",{staticClass:"title",attrs:{span:6}},[t._v("需求：")]),t._v(" "),a("el-col",{attrs:{span:18}},[t.taskData.doUserId==t.userId&&1==t.taskData.status||4==t.taskData.status?[a("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:9},placeholder:"请输入内容"},model:{value:t.taskData.remark,callback:function(s){t.$set(t.taskData,"remark",s)},expression:"taskData.remark"}})]:[t._v(t._s(t.taskData.remark))]],2),t._v(" "),a("el-col",{staticClass:"title",attrs:{span:6}},[t._v("附件：")]),t._v(" "),a("el-col",{staticClass:"proFileList",attrs:{span:18}},[t.taskData.doUserId==t.userId&&1==t.taskData.status||4==t.taskData.status?[a("el-upload",{staticClass:"elementUpload",attrs:{action:t.uploadUrl,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"file-list":t.fileList0}},[a("el-button",{attrs:{size:"mini",type:"primary"}},[t._v("点击上传附件")])],1)]:t._l(t.taskData.proFileList,function(s){return a("div",{key:s.index,staticClass:"smname",on:{click:function(a){return t.download(s)}}},["doc"==s.suffix||"docx"==s.suffix?a("img",{attrs:{src:"static/images/document/word.png",width:"24",alt:"",srcset:""}}):"xls"==s.suffix||"xlsx"==s.suffix?a("img",{attrs:{src:"static/images/document/excle.png",width:"24",alt:"",srcset:""}}):"ppt"==s.suffix||"pptx"==s.suffix?a("img",{attrs:{src:"static/images/document/ppt.png",width:"24",alt:"",srcset:""}}):a("img",{attrs:{src:"static/images/document/other.png",width:"24",alt:"",srcset:""}}),t._v(" "),a("div",[t._v(t._s(s.fileName))])])})],2),t._v(" "),a("el-divider",{attrs:{"content-position":"right"}}),t._v(" "),a("el-col",{staticClass:"title",attrs:{span:6}},[t._v("完成结果：")]),t._v(" "),a("el-col",{attrs:{span:18}},[t.taskData.doUserId==t.userId&&3!=t.taskData.status&&5!=t.taskData.status?[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入内容",disabled:t.resultBan},model:{value:t.taskData.overDesc,callback:function(s){t.$set(t.taskData,"overDesc",s)},expression:"taskData.overDesc"}})]:[t._v(t._s(t.taskData.overDesc))]],2),t._v(" "),a("el-col",{staticClass:"title",attrs:{span:6}},[t._v("附件：")]),t._v(" "),a("el-col",{staticClass:"proFileList",attrs:{span:18}},[t.taskData.doUserId==t.userId&&3!=t.taskData.status&&5!=t.taskData.status?[a("el-upload",{staticClass:"elementUpload",attrs:{action:"/pmbs/file/upload?upType=1&demandType=1","on-remove":t.handleRemoveResult,"on-success":t.handleSuccessResult,disabled:t.updateBan,fileList:t.fileList1,limit:1}},[a("el-button",{attrs:{size:"mini",type:"primary"}},[t._v("点击上传文档")])],1)]:t._l(t.taskData.taskfileList,function(s){return a("div",{key:s.index,staticClass:"smname",on:{click:function(a){return t.download(s)}}},["doc"==s.suffix||"docx"==s.suffix?a("img",{attrs:{src:"static/images/document/word.png",width:"24",alt:"",srcset:""}}):"xls"==s.suffix||"xlsx"==s.suffix?a("img",{attrs:{src:"static/images/document/excle.png",width:"24",alt:"",srcset:""}}):"ppt"==s.suffix||"pptx"==s.suffix?a("img",{attrs:{src:"static/images/document/ppt.png",width:"24",alt:"",srcset:""}}):a("img",{attrs:{src:"static/images/document/other.png",width:"24",alt:"",srcset:""}}),t._v(" "),a("div",[t._v(t._s(s.fileName))])])})],2),t._v(" "),a("el-divider",{attrs:{"content-position":"right"}}),t._v(" "),a("el-col",{staticClass:"title",attrs:{span:6}},[t._v("反馈意见：")]),t._v(" "),a("el-col",{staticClass:"suggest",attrs:{span:18}},[a("el-scrollbar",{staticStyle:{height:"100%"}},t._l(t.taskData.feedbackList,function(s){return a("el-col",{key:s.index,staticClass:"suggest_list",attrs:{span:23}},[a("el-col",{staticClass:"time",attrs:{span:12}},[t._v(t._s(s.updateTime))]),t._v(" "),a("el-col",{staticClass:"pop",attrs:{span:12}},[t._v(t._s(s.deptName)+"-"+t._s(s.feedbackUserName))]),t._v(" "),a("el-col",{staticClass:"content",attrs:{span:24}},[t._v(t._s(s.feedback))])],1)}),1)],1)],1)],1),t._v(" "),a("el-row",{staticClass:"batton_pa"},[3!=t.taskData.status&&5!=t.taskData.status?a("el-col",{staticClass:"batton",attrs:{span:12,offset:7}},[a("el-button",{attrs:{size:"small",type:"info"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.changeTaskDeil}},[t._v("完成")])],1):t._e()],1)],1),t._v(" "),a("el-drawer",{attrs:{title:"任务",visible:t.drawer2,"with-header":!1},on:{"update:visible":function(s){t.drawer2=s}}},[a("el-row",{staticClass:"feedback"},[a("el-col",{attrs:{span:24}},[a("el-col",{staticClass:"title",attrs:{span:24}},[t._v(t._s(t.drawer2_task))]),t._v(" "),a("el-col",{staticClass:"title",attrs:{span:6}},[t._v("反馈")]),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-input",{attrs:{type:"textarea",rows:9,placeholder:"请输入内容"},model:{value:t.feedbackContent,callback:function(s){t.feedbackContent=s},expression:"feedbackContent"}})],1),t._v(" "),a("el-col",{staticClass:"Upload",attrs:{span:24}},[a("el-divider"),t._v(" "),a("el-upload",{staticClass:"elementUpload",attrs:{action:"/pmbs/file/upload?upType=1&demandType=1","on-remove":t.handleRemoveFeedback,"on-success":t.handleSuccessFeedback,limit:1}},[a("el-button",{attrs:{size:"mini",type:"primary"}},[t._v("点击上传文档")])],1)],1)],1),t._v(" "),a("el-col",{staticClass:"batton",attrs:{span:12,offset:7}},[a("el-button",{attrs:{size:"small",type:"info"},on:{click:t.empty}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.taskFeedback}},[t._v("提交")])],1)],1)],1),t._v(" "),a("el-drawer",{attrs:{title:"任务",visible:t.drawer3,"with-header":!1},on:{"update:visible":function(s){t.drawer3=s}}},[a("el-row",{staticClass:"feedback"},[a("el-col",{attrs:{span:24}},[a("el-col",{staticClass:"title",attrs:{span:24}},[t._v(t._s(t.drawer3_task))]),t._v(" "),a("el-col",{staticClass:"title",attrs:{span:6}},[t._v("延期原因")]),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-input",{attrs:{type:"textarea",rows:9,placeholder:"请输入内容"},model:{value:t.cause,callback:function(s){t.cause=s},expression:"cause"}})],1)],1),t._v(" "),a("el-col",{staticClass:"batton",attrs:{span:12,offset:7}},[a("el-button",{attrs:{size:"small",type:"info"},on:{click:t.empty}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("提交")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(t){a("DM7k")},"data-v-f3fc86c8",null);s.default=d.exports}});