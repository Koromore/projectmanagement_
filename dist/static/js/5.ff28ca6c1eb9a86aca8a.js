webpackJsonp([5],{C16p:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i={name:"task",data:function(){return{loginState:!0,project_style:"",drawer:!1,client_list:[{value:"广汽本田",label:"广汽本田"},{value:"吉利",label:"吉利"},{value:"沃尔沃",label:"沃尔沃"}],client:"广汽本田",businessList:[],clientList:[],tableData2:[{id:1,client:"广汽本田",business:"官网",operation:"操作"},{id:2,client:"长城",business:"官网，口碑",operation:"操作"},{id:3,client:"吉利",business:"官网，APP",operation:"操作"},{id:4,client:"沃尔沃",business:"官网",operation:"操作"}],tabs_activity:1,table_show:!0,operation:1,transferId:"",new_name:"",businessListCheck:[]}},methods:{widthheight:function(){window.innerWidth,window.innerHeight},drawer_show:function(){this.drawer=!0},table_tab:function(t){1==t?(this.tabs_activity=1,this.table_show=!0):2==t&&(this.tabs_activity=2,this.table_show=!1)},getBusinessListAjax:function(t){this.$axios.post("/pmbs/api/business/listAjax",{}).then(this.getBusinessListAjaxSuss)},getBusinessListAjaxSuss:function(t){console.log(t),200==t.status&&(this.businessList=t.data.items,console.log(this.businessList))},getClientListAjax:function(t){this.$axios.post("/pmbs/client/list",{pageNum:""}).then(this.getClientListAjaxSuss)},getClientListAjaxSuss:function(t){console.log(t)},add_drawer:function(){this.drawer=!0,this.operation=1,this.transferId=""},business_change:function(t){this.drawer=!0,this.operation=2,this.transferId=t},client_change:function(t){this.drawer=!0,this.operation=2,this.transferId=t},putIn:function(){var t=this.tabs_activity,s={};1==t?(s={businessId:this.transferId,businessName:this.new_name},this.businessSave(s)):2==t&&(s={clientName:this.new_name,businessList:{businessName:"",businessId:""}},this.clientSave(s))},businessSave:function(t){var s=t;if(console.log(s),""==s.businessName){this.messageError("请信息填写完整！")}else this.$axios.post("/pmbs/api/business/save",s).then(this.businessSaveSuss)},businessSaveSuss:function(t){console.log(t),200==t.status&&(this.getBusinessListAjax(),this.messageWin(t.data.msg),this.transferId="",this.new_name="",this.drawer=!1)},clientSave:function(t){var s=t;if(console.log(s),""==s.businessName||""==s.businessList.businessId){this.messageError("请信息填写完整！")}},clientSaveSuss:function(t){console.log(t),200==t.status&&(this.getClientListAjax(),this.messageWin(t.data.msg),this.transferId="",this.new_name="",this.businessListCheck=[],this.drawer=!1)},delete_but:function(t){var s=this.tabs_activity,e={};1==s?(e.id=t,this.businessDelete(e)):2==s&&(e=t,this.clientDelete(e))},businessDelete:function(t){var s=t;console.log(s)},businessDeleteSuss:function(t){200==t.status&&this.messageWin(t.data.msg)},clientDelete:function(t){var s=t;console.log(s)},clientDeleteSuss:function(t){200==t.status&&this.messageWin(t.data.msg)},messageWin:function(t){this.$message({message:t,type:"success"})},messageError:function(t){this.$message.error(t)}},mounted:function(){this.getBusinessListAjax(),this.getClientListAjax()}},a={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"set",style:t.project_style},[e("el-row",[e("el-col",{staticClass:"tabs",attrs:{span:24}},[e("div",{class:["1"==t.tabs_activity?"act":""],on:{click:function(s){return t.table_tab(1)}}},[t._v("业务类型")]),t._v(" "),e("div",{class:["2"==t.tabs_activity?"act":""],on:{click:function(s){return t.table_tab(2)}}},[t._v("客户")])]),t._v(" "),e("el-col",{staticClass:"add",attrs:{span:24}},[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(s){return t.add_drawer()}}},[t._v("新增")])],1),t._v(" "),e("el-col",{directives:[{name:"show",rawName:"v-show",value:t.table_show,expression:"table_show"}],staticClass:"table table1",attrs:{span:24}},[e("el-table",{ref:"filterTable",staticStyle:{width:"100%"},attrs:{data:t.businessList,"header-cell-style":{background:"rgb(236, 235, 235)",color:"#000"},"row-style":{height:"57px"}}},[e("el-table-column",{attrs:{prop:"businessName",label:"名称"}}),t._v(" "),e("el-table-column",{attrs:{prop:"tag",label:"操作",width:"180","filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-button",{attrs:{size:"small",type:"info"},on:{click:function(e){return t.business_change(s.row.businessId,s.row.businessId)}}},[t._v("修改")]),t._v(" "),e("el-popconfirm",{attrs:{title:"确认执行此操作吗？"},on:{onConfirm:function(e){return t.delete_but(s.row.businessId)}}},[e("el-button",{attrs:{slot:"reference",size:"small",type:"primary"},slot:"reference"},[t._v("删除")])],1)]}}])})],1)],1),t._v(" "),e("el-col",{directives:[{name:"show",rawName:"v-show",value:!t.table_show,expression:"!table_show"}],staticClass:"table table2",attrs:{span:24}},[e("el-table",{ref:"filterTable",staticStyle:{width:"100%"},attrs:{data:t.tableData2,"header-cell-style":{background:"rgb(236, 235, 235)",color:"#000"},"row-style":{height:"57px"}}},[e("el-table-column",{attrs:{prop:"client",label:"客户"}}),t._v(" "),e("el-table-column",{attrs:{prop:"business",label:"业务"}}),t._v(" "),e("el-table-column",{attrs:{prop:"tag",label:"操作",width:"180","filter-placement":"bottom-end"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-button",{attrs:{size:"small",type:"info"},on:{click:function(e){return t.client_change(s.row.id)}}},[t._v("修改")]),t._v(" "),e("el-popconfirm",{attrs:{title:"确认执行此操作吗？"},on:{onConfirm:function(e){return t.delete_but(s.row.id)}}},[e("el-button",{attrs:{slot:"reference",size:"small",type:"primary"},slot:"reference"},[t._v("删除")])],1)]}}])})],1)],1)],1),t._v(" "),e("el-drawer",{attrs:{title:"新增",visible:t.drawer,"with-header":!1},on:{"update:visible":function(s){t.drawer=s}}},[e("el-row",{staticClass:"add_box"},[e("el-col",{staticClass:"new_name",attrs:{span:24}},[e("el-col",{staticClass:"title title1",attrs:{span:6}},[t._v("名称")]),t._v(" "),e("el-col",{attrs:{span:13}},[e("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.new_name,callback:function(s){t.new_name=s},expression:"new_name"}})],1),t._v(" "),e("el-col",{directives:[{name:"show",rawName:"v-show",value:2==t.tabs_activity,expression:"tabs_activity == 2"}],staticClass:"title title2",attrs:{span:6}},[t._v("业务")]),t._v(" "),e("el-col",{directives:[{name:"show",rawName:"v-show",value:2==t.tabs_activity,expression:"tabs_activity == 2"}],staticClass:"check_box",attrs:{span:13,offset:6}},[e("el-checkbox-group",{model:{value:t.businessListCheck,callback:function(s){t.businessListCheck=s},expression:"businessListCheck"}},t._l(t.businessList,function(s){return e("el-checkbox",{key:s.index,attrs:{label:s.businessId}},[t._v(t._s(s.businessName))])}),1)],1)],1),t._v(" "),e("el-col",{staticClass:"batton",attrs:{span:12,offset:7}},[e("el-button",{attrs:{size:"small",type:"info"}},[t._v("取消")]),t._v(" "),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.putIn}},[t._v("提交")])],1)],1)],1)],1)},staticRenderFns:[]};var n=e("VU/8")(i,a,!1,function(t){e("ukQX")},"data-v-206864b6",null);s.default=n.exports},ukQX:function(t,s){}});