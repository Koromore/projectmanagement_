webpackJsonp([2],{"2rGD":function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e={name:"statistics",data:function(){return{statisticsData:{},businessNameData:[],businessListData:[],statusNameData:[],statusListData:[],clientNameData:[],clientStatusData:[]}},methods:{widthheight:function(){window.innerWidth,window.innerHeight},getStatisticsData:function(){this.$axios.post("/pmbs/api/statistic/listAjax",{}).then(this.getStatisticsDataSuss)},getStatisticsDataSuss:function(t){if(200==t.status){this.statisticsData=t.data.data;for(var a=t.data.data,s=a.listBusiness,e=[],i=[],n=0;n<s.length;n++){var o=s[n];e.push(o.businessName);o.listProject;var r={value:o.listProject.length,name:o.businessName,clientList:[]};i.push(r)}this.businessNameData=e,this.businessListData=i;for(var l=a.listProjectStatus,c=[],h=[],u=0;u<l.length;u++){var d=l[u],p={};p.value=d.proNum,p.name=d.status,c.push(d.status),h.push(p)}this.statusNameData=c,this.statusListData=h;for(var g=a.listClient,m=[],b=[],f=0;f<g.length;f++){var v=g[f];m.push(v.clientName)}this.clientNameData=m;for(var D={name:"延期",type:"bar",stack:"广告",data:[],nodeClick:"link"},_={name:"审核中",type:"bar",stack:"广告",data:[],nodeClick:"link"},y={name:"执行中",type:"bar",stack:"广告",data:[],nodeClick:"link"},x=0;x<g.length;x++){for(var L=g[x],w=0,C=0;C<L.projectList.length;C++){4==L.projectList[C].status&&w++}D.data.push(w)}for(var j=0;j<g.length;j++){for(var S=g[j],B=0,F=0;F<S.projectList.length;F++){2==S.projectList[F].status&&B++}_.data.push(B)}for(var N=0;N<g.length;N++){for(var k=g[N],E=0,A=0;A<k.projectList.length;A++){1==k.projectList[A].status&&E++}y.data.push(E)}b.push(D),b.push(_),b.push(y),this.clientStatusData=b,this.business_gantt(e,i),this.project_state_gantt(),this.client_state_gantt()}},business_gantt:function(t,a){var s=this.$echarts.init(document.getElementById("business")),e=this.businessNameData,i=this.businessListData;s.setOption({title:{text:"业务占比",padding:16},color:["#85AFE4","#778CD5","#737ACE","#6F69C6","#B8B3F3","#DDDBF9","#90CFF2","#8BBFE8"],tooltip:{trigger:"item",formatter:function(t,a,s){for(var e="",i=0;i<t.data.clientList.length;i++){e+=t.data.clientList[i]+"<br/>"}return"\n            "+t.name+"\n            ("+t.percent+"%)<br/>\n            "+e+"\n            "}},legend:{type:"scroll",icon:"circle",orient:"horizontal",bottom:10,data:e},series:[{name:"业务类型",type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,label:{normal:{show:!1,position:"center"},emphasis:{show:!0,textStyle:{fontSize:"30",fontWeight:"bold"}}},labelLine:{normal:{show:!1}},data:i}]})},project_state_gantt:function(){var t=this.$echarts.init(document.getElementById("project_state")),a=this.statusNameData,s=this.statusListData;t.setOption({title:{text:"项目状态",padding:16},color:["#23D7BB","#f5b96a","#C9C9C9","#FF0000"],tooltip:{trigger:"item",formatter:"{b}({d}%)"},legend:{icon:"circle",orient:"horizontal",bottom:10,align:"auto",data:a},series:[{name:"项目状态",type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,label:{normal:{show:!1,position:"center"},emphasis:{show:!0,textStyle:{fontSize:"30",fontWeight:"bold"}}},labelLine:{normal:{show:!1}},data:s}]})},client_state_gantt:function(){var t=this,a=this.$echarts.init(document.getElementById("client_state")),s=this.clientNameData,e=this.clientStatusData;a.setOption({title:{text:"客户状态",subtextStyle:{align:"center",rich:{a:{}}},padding:16},color:["#FF0000","#F5B96A","#23D7BB"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["延期","审核中","执行中"],top:16},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:s,triggerEvent:!0}],yAxis:[{type:"value"}],series:e}),a.on("click",function(a){var s=a.name;t.$router.push({path:"/home/components/project",query:{name:s}})})}},mounted:function(){this.widthheight(),this.getStatisticsData()}},i={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"statistics"},[a("el-row",[a("el-col",{staticClass:"gantt_box",attrs:{span:10}},[a("div",{style:{width:"100%",height:"300px"},attrs:{id:"business"}})]),this._v(" "),a("el-col",{staticClass:"gantt_box",attrs:{span:10,offset:1}},[a("div",{style:{width:"100%",height:"300px"},attrs:{id:"project_state"}})]),this._v(" "),a("el-col",{staticClass:"gantt_box",attrs:{span:21}},[a("div",{style:{width:"100%",height:"450px"},attrs:{id:"client_state"}})])],1)],1)},staticRenderFns:[]};var n=s("VU/8")(e,i,!1,function(t){s("qEtC")},"data-v-ce057da2",null);a.default=n.exports},qEtC:function(t,a){}});